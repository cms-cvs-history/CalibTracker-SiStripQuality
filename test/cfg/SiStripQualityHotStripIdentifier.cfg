process ICALIB = {
    
    service = MessageLogger {
	untracked vstring destinations = { "cout" }
	#untracked PSet cout = { untracked string threshold = "DEBUG" }
	untracked PSet cout = { untracked string threshold = "INFO" }
	untracked vstring debugModules   = { "*" }

    }

    source = PoolSource { 
	untracked vstring fileNames = { 
	    "file:/tmp/giordano/TIF_reconstruction_RealData_TIBTOB_full.root"
	}
    }
    untracked PSet maxEvents = {untracked int32 input = -1}
  
    
    service = PoolDBOutputService{
	string connect = "sqlite_file:dbfile.db"    
	string timetype = "runnumber"    
	untracked string BlobStreamerName="TBufferBlobStreamingService"
	PSet DBParameters = {
	    untracked string authenticationPath="/afs/cern.ch/cms/DB/conddb"
	}
	
        VPSet toPut={ { string record = "SiStripBadStrip" string tag = "SiStripBadChannel_v1"} }
    }
        
    module prod =  SiStripQualityHotStripIdentifier {	

	//ConditionDBWriter parameters
	bool SinceAppendMode = true
	string IOVMode	     = "Run"
	string Record        = "SiStripBadStrip"
	bool doStoreOnDB     = true

	//this module parameters
	#untracked FileInPath file = "CalibTracker/SiStripCommon/data/SiStripDetInfo.dat"
	
	PSet AlgoParameters = { 
	    string AlgoName= "SiStripHotStripAlgorithmFromClusterOccupancy" 
	    untracked double ProbabilityThreshold = 1.E-7
	    untracked uint32 MinNumEntries = 100
	    untracked uint32 MinNumEntriesPerStrip = 10
	}
	
	InputTag Cluster_src = siStripClusters	
	untracked bool RemoveTrackClusters = true
	untracked InputTag Track_src = ctfWithMaterialTracksTIFTIBTOB	
	untracked PSet ClusterSelection = {
	    #minWidth <= width <= maxWidth
	    untracked uint32 minWidth = 1
	    untracked uint32 maxWidth = 10000
	}
    }


    path p = { prod }
        
    module print = AsciiOutputModule {}
    endpath ep = { print }
}

